<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>CAE</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>CAE</h1>
					<h3>Búsqueda de un método de controlar la Calidad</h3>
					<p>
						<small>Una creación del <a href="http://10.80.128.63/continguts.asp?servei=45">Servei de Protecció Radiològica</a> </small>
					</p>
				</section>
				<section data-background-color="lightblue">
					<section>
						<h2>Control de Calidad del CAE</h2>
						<img src="https://radiologykey.com/wp-content/uploads/2016/02/B978032306974810013X_f13-01-9780323069748.jpg" width="400" height="300" alt="Google Logo">
					</section>
					<section>
						<h3>Protocolo español de control de calidad en radiodiagnóstico</h3>
						<img src="http://drive.google.com/uc?export=view&id=1oFtQvRKiuXzM7k5siyF3kYmMVThJRUwU" width="400" height="300" alt="Google Logo">
						<p> El enlace al protocolo se encuentra en la página de la
							 <a href="http://socios.sefm.es/psefm/ProtocoloPECCRD2011.pdf">SEFM</a>
						 </p>
					</section>
					<section>
						<h3>Función de trasferencia(FDT)</h3>
						<ul>
							<li>El C.A.E. es un dispositivo de medida de dosis a la entrada o a la salida del receptor de imagen.</li>
							<li>La dosis en el receptor de imagen está relacionada con el "nivel de gris" en el mismo.</li>
							<li>Es por eso que debemos conocer la función que liga alguno de los parámetros que registra el panel con la dosis que le llega. Esto es, la FDT.</li>
							<img src="https://radiologykey.com/wp-content/uploads/2016/02/B978032306974810013X_f13-02-9780323069748.jpg" width="300" height="300" alt="Google Logo">
							<img src="https://radiologykey.com/wp-content/uploads/2016/02/B978032306974810013X_f13-03-9780323069748.jpg" width="300" height="300" alt="Google Logo">
						</ul>
					</section>
				</section>
				<section data-background-color="#00ffff">
						<section>
							<h2>Procedimiento de medida</h2>
							<!-- Gráfica de los espectros teóricos-->
							<img src="http://www.ptw.de/typo3temp/pics/ee83692a12.jpg" width="400" height="300" alt="Google Logo">
						</section>
						<section>
							<h3>Procedimiento</h3>
							<ul>
								<li>El objetivo es poner en relación algún parámetro de imagen con la dosis en el receptor</li>
								<li>En nuestro caso, usamos el indicador de dosis del CR</li>
							</ul>
							<table>
								<thead>
									<tr>
										<th>mAs</th>
										<th>Dosis (uGy)</th>
										<th>IER</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>30</td>
										<td>2.69</td>
										<td>186</td>
									</tr>
									<tr>
										<td>...</td>
										<td>...</td>
										<td>...</td>
									</tr>
									<tr>
										<td>50</td>
										<td>4.495</td>
										<td>197</td>
									</tr>
									<tr>
										<td>100</td>
										<td>8.951</td>
										<td>228</td>
									</tr>
								</tbody>
							</table>
							<p class="fragment">Esta medida se hace en dos pasos: Una colocando el detector de radiación y otra poniendo el detector de imagen</p>
							<p class="fragment">Este paso se puede discutir</p>
						</section>
						<section>
							<h3>Medida de la primaria</h3>
							<img src="http://drive.google.com/uc?export=view&id=1z4xcfCwfREnpFDT-7t6tp6GKo4Uu3Vj1" width="400" height="300" alt="Google Logo">
							<img src="http://drive.google.com/uc?export=view&id=1tuiQemBytAsQknhPOf_wVANDcnXIndE1" width="400" height="300" alt="Google Logo">
							<p>Es importante que la medida de la función de transferencia se haga solo con la contribución de la radiación primaria</p>
							<p class="fragment">Aunque el mantener todo ese PMMA en el aire es bastante complicado</p>
						</section>
						<section>
							<h3>Búsqueda de un procedimiento alternativo</h3>
							<img src="https://i.pinimg.com/originals/a6/c0/20/a6c0202cc78b8b36bd3864a45fdf38ba.jpg" width="300" height="400" alt="Google Logo">
							<p>¿No habría alguna manera de evitarse un montaje tan aparatoso?</p>
						</section>
				</section>
				<section data-background-color="#bb00bb" data-background="http://drive.google.com/uc?export=view&id=1JmXvGroLMixNVDydflp0u4ezysj_pKZl" data-background-size="200px" data-background-repeat="repeat">
					<section>
						<h2>Espectros Teóricos</h2>
						<img src="https://www.nde-ed.org/EducationResources/CommunityCollege/Radiography/Graphics/Bremsstrahlung.jpg" width="500" height="400" alt="Google Logo">
					</section>
					<section>
						<h3>Recursos en la web</h3>
						<img src="http://drive.google.com/uc?export=view&id=188L2w6f1J_Ch0YJfBfjNfg_llU7bNEuK" width="500" height="400" alt="Google Logo">
						<p> El recurso se encuentra
							 <a href="https://www.oem-xray-components.siemens.com/x-ray-spectra-simulation">aquí</a>
						 </p>
					</section>
					<section>
						<h3>Referencia</h3>
						<img src="http://drive.google.com/uc?export=view&id=19yUW5AdPLWuKBIb4bYtORt40K69O1zQJ" width="600" height="300" alt="Google Logo">
					</section>
					<section>
						<h3>Comparativa entre espectros</h3>
						<!-- Gráfica de los espectros teóricos-->
						<iframe class="highcharts-iframe" src="https://cloud.highcharts.com/embed/Byx6dxv0f/" style="border: 1; width: 100%; height: 350px"></iframe>
					</section>
					<section>
						<h3>Comparativa entre espectros</h3>
						<div>
							\[  \begin{aligned}
							 E_T =  \sum_{i=1}^n N_i E_i \end{aligned} \\
							 E_{Al} = 51.80\frac{keV}{electrón} \  \ E_{PMMA} = 52.32\frac{keV}{electrón} \\
							 E_{PMMA}=1.01 \cdot E_{Al}
							\]
						</div>
						<p class="fragment">Parece que el comportamiento teórico del aluminio y PMMA son equivalentes</p>
						<p class="fragment">¿Lo serán las FDTs?</p>
					</section>
				</section>
				<section data-background-color="lightblue">
					<section>
						<h2>Comparativa de las FDTs</h2>
						<img src="http://drive.google.com/uc?export=view&id=1sX74e_sG6CmLbmYjBU5cRLvosuf0aHh7" width="400" height="300" alt="Google Logo">
					</section>
					<section>
						<h3>Composición de la aleación de aluminio</h3>
						<img src="http://drive.google.com/uc?export=view&id=1_lR3o9T18j2epQbysn9jAhSyzBDOIVVZ" width="600" height="400" alt="Google Logo">
					</section>
					<section>
						<h3>Efecto de la aleación en los espectros</h3>
						<iframe class="highcharts-iframe" src="https://cloud.highcharts.com/embed/r1TyThL0M/" style="border: 1; width: 100%; height: 350px"></iframe>
						<p class="fragment">De manera teórica ya vemos que hay una incertidumbre asociada a la composición de la aleación</p>
					</section>
					<section>
						<h3>Comparativa entre espectros</h3>
						<div>
							<table>
							  <thead>
							    <tr style="text-align: right;">
							      <th>Material</th>
							      <th>Energía</th>
							    </tr>
							  </thead>
							  <tbody>
							    <tr>
							      <td>PMMA</td>
							      <td>52.323</td>
							    </tr>
							    <tr>
							      <td>Al puro</td>
							      <td>51.802</td>
							    </tr>
							    <tr>
							      <td>Al5083 max</td>
							      <td>53.802</td>
							    </tr>
							    <tr>
							      <td>Al5083 min</td>
							      <td>52.140</td>
							    </tr>
							  </tbody>
							</table>
						</div>
					</section>
					<section>
						<h3>Índice de Exposición</h3>
						<img src="http://drive.google.com/uc?export=view&id=1R1q3jdbdEBJKoBlMFmEP8i6kCy90vuio" width="350" height="450" alt="Google Logo">
						<p class="fragment">Usamos este indicador ya que se obtiene de la imagen bruta</p>
					</section>
					<section>
							<h3>Carga de los datos</h3>
							<pre><code class="hljs" data-trim contenteditable>
								import numpy as np
								from scipy import stats, signal
								import pandas as pd

								TablaPMMA = pd.read_csv('TablaPMMA.csv')[[
								    'IndiceExposicion', 'Dosis(uGy)', 'HVL'
								]]

								TablaAl = pd.read_csv('TablaAl.csv')[[
								    'IndiceExposicion', 'Dosis(uGy)', 'HVL']]
								</code></pre>
  								<img src="http://drive.google.com/uc?export=view&id=12_QSuu3pXOWgkS4pk1cthyFdICj-iADP" width="250" height="250" alt="Google Logo">
									<img src="http://drive.google.com/uc?export=view&id=1P0uGnVFmVjlyYN8jWHqOoquA5lCSVQ54" width="250" height="250" alt="Google Logo">
					</section>
					<section>
								<h3>Ajuste lineal</h3>
								<pre><code class="hljs" data-trim contenteditable>
									PMMA80 = stats.linregress(
											np.log(TablaPMMA['IndiceExposicion'].get_values()),
											np.log(TablaPMMA['Dosis(uGy)'].get_values()))
									Al80 = stats.linregress(
											np.log(TablaAl['IndiceExposicion'].get_values()),
											np.log(TablaAl['Dosis(uGy)'].get_values()))
							  </code></pre>
								<p class="fragment">Ya tenemos el ajuste de las rectas de ambos materiales</p>
								<p class="fragment">Le hemos quitado la dependencia logarítmica</p>
					</section>
					<section>
						<h3>Gráfica comparativa con el PMMA</h3>
						<iframe class="highcharts-iframe" src="https://cloud.highcharts.com/embed/Hk9VCPx0f/" style="border: 0; width: 100%; height: 350px"></iframe>
						<p class="fragment">No obstante, encontremos la función que transforma una gráfica en la otra</p>
					</section>
					<section>
						<h3>Kernel de convolución</h3>
						<div>
							\[
							 \begin{aligned}
 							 f_{PMMA} =  k * f_{Al}\end{aligned} \\
							\]
						</div>
					</section>
					<section>
							<h3>Función de conversión</h3>
								<pre><code class="hljs" data-trim contenteditable>
									X = np.log(np.arange(180, 270))

									pPMMA = np.poly1d([PMMA80.slope, PMMA80.intercept])
									pAl = np.poly1d([Al80.slope, Al80.intercept])

									PMMAfunction = np.polyval(pPMMA, X)
									Alfunction = np.polyval(pAl, X)

									Al_to_PMMA = np.polydiv(pPMMA, pAl)
							</code></pre>
							<p>Las funciones polymul y polydiv corresponden en el caso de polinomios, a convolución y deconvolución, respectivamente</p>
					</section>
					<section>
						<h3>datos numéricos</h3>
						<div>
							\[
							 \begin{aligned}
							 f\left(x\right) =  mx+b\end{aligned} \\
							\]
						</div>
						<div>
							<table>
								<thead>
									<tr style="text-align: right;">
										<th>función</th>
										<th>m</th>
										<th>b</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>PMMA</td>
										<td>5.481</td>
										<td>-27.488</td>
									</tr>
									<tr>
										<td>Al5083</td>
										<td>5.365</td>
										<td>-26.862</td>
									</tr>
									<tr>
										<td>kernel</td>
										<td>1.022</td>
										<td>-0.047</td>
									</tr>
								</tbody>
							</table>
						</div>
					</section>
					<section>
						<h3>Cuestiones</h3>
						<p>¿Qué hacemos con todo esto?</p>
					</section>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({

				math: {
					//mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
					config: 'TeX-AMS_HTML-full'
				},
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); }},
					{ src: 'plugin/math/math.js', async: true }
				]
			});
		</script>
	</body>
</html>
